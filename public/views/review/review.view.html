<div ng-controller="ReviewController as vm" class="container">
    <h1>Review</h1>
    <hr>

    <div ng-hide="vm.grocery">
        Invalid Grocery Store.
    </div>

    <div ng-hide="vm.currentUser && vm.grocery">

        Please <a href="#/login">log in</a> or <a href="#/register">register</a> to write a review!

    </div>


    <div ng-show="vm.currentUser && vm.grocery">

        <p>
            <a ng-href="#/grocery/{{vm.grocery._id}}">
                {{vm.grocery.name.charAt(0).toUpperCase() + vm.grocery.name.slice(1)}}&nbsp;
                - {{vm.grocery.address}}
            </a>
        </p>

        <p>
        <div class="col-sm-offset-2 col-sm-8">
            <form class="form-horizontal">
                <div ng-class="{'form-group': true, 'has-error': vm.fruitError}">
                    <label class="col-sm-3 control-label">Fruit:</label>
                    <div class="col-sm-9" ng-hide="vm.edit">
                        <input ng-model="vm.fruit"
                               type="text"
                               class="form-control"
                               placeholder="Clementine, Pear, ...">
                    </div>
                    <div class="col-sm-9" ng-show="vm.edit">
                        {{vm.fruit.charAt(0).toUpperCase() + vm.fruit.slice(1)}}
                    </div>
                </div>
                <!-- TODO: Star ratings needs to be a directive to manipulate the DOM -->
                <div ng-class="{'form-group': true, 'has-error': vm.ratingError}">
                    <label class="col-sm-3 control-label">Rating:</label>
                    <div class="col-sm-9">
                        <span class="rating">
                            <span ng-click="vm.rate5star()" ng-bind-html="vm.stars[4]"></span>
                            &nbsp;
                            <span ng-click="vm.rate4star()" ng-bind-html="vm.stars[3]"></span>
                            &nbsp;
                            <span ng-click="vm.rate3star()" ng-bind-html="vm.stars[2]"></span>
                            &nbsp;
                            <span ng-click="vm.rate2star()" ng-bind-html="vm.stars[1]"></span>
                            &nbsp;
                            <span ng-click="vm.rate1star()" ng-bind-html="vm.stars[0]"></span>
                        </span>
                    </div>
                </div>

                <div ng-class="{'form-group': true, 'has-error': vm.commentsError}">
                    <label class="col-sm-3 control-label">Comments:</label>
                    <div class="col-sm-9">
                        <textarea ng-model="vm.comments" class="form-control" rows="9"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9">
                        <button ng-click="vm.submit()"
                                class="btn btn-default btn-block">
                            Submit
                        </button>
                    </div>
                </div>

            </form>
        </div>
        </p>

    </div>

</div>